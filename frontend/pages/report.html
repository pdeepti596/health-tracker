
<div class="max-w-7xl mx-auto p-6">

  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold">Health Report</h1>
      <p class="text-sm text-gray-600">
        Combined data from Users, Activity & Medical Records
      </p>
    </div>

    <a href="/home" data-link
       class="inline-flex items-center gap-2 px-4 py-2 text-sm
              border border-gray-300 rounded-md
              text-gray-700 bg-white
              hover:bg-gray-50 hover:border-gray-400 transition">
      ← Back to Home
    </a>
  </div>

  <!-- Search + Sort + Export -->
  <div class="bg-white p-5 rounded shadow mb-6">
    <div class="flex flex-col gap-4">

      <div class="flex flex-col lg:flex-row lg:items-center gap-3">

        <!-- Search -->
        <div class="w-full lg:w-96 relative">
          <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm"></i>
          <input
            id="searchInput"
            type="text"
            placeholder="Search by name, disease, allergies..."
            class="w-full h-10 border rounded pl-9 pr-3 text-sm
                   focus:outline-none focus:ring-2 focus:ring-blue-200"
          />
        </div>

        <!-- Sort -->
        <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">

          <div class="relative w-full sm:w-48">
            <i class="fa-solid fa-arrow-down-a-z absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm"></i>
            <select id="sortBy" class="w-full h-10 border rounded pl-9 pr-3 text-sm bg-white">
              <option value="user_id">Sort: User ID</option>
              <option value="name">Sort: Name</option>
              <option value="age">Sort: Age</option>
              <option value="steps">Sort: Steps</option>
              <option value="calories">Sort: Calories</option>
            </select>
          </div>

          <div class="relative w-full sm:w-32">
            <i class="fa-solid fa-up-down absolute left-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm"></i>
            <select id="sortDir" class="w-full h-10 border rounded pl-9 pr-3 text-sm bg-white">
              <option value="asc">Asc ↑</option>
              <option value="desc">Desc ↓</option>
            </select>
          </div>

        </div>

        <!-- Export -->
        <div class="flex gap-2 w-full lg:w-auto lg:ml-auto">
          <button id="exportCsvBtn"
                  class="h-10 px-3 rounded border bg-white text-sm text-gray-800
                         inline-flex items-center gap-2 justify-center
                         hover:bg-gray-50">
            <i class="fa-solid fa-file-csv text-green-700"></i>
            CSV
          </button>

          <button id="exportPdfBtn"
                  class="h-10 px-3 rounded bg-blue-600 text-white text-sm
                         inline-flex items-center gap-2 justify-center
                         hover:bg-blue-700">
            <i class="fa-solid fa-file-pdf"></i>
            PDF
          </button>
        </div>

      </div>

      <div class="text-sm text-gray-500">
        <span id="resultCount">Showing all records</span>
      </div>

    </div>
  </div>

  <!-- Report Table -->
  <div class="bg-white p-5 rounded shadow">

    <!-- Loading -->
    <div id="loadingSpinner" class="text-center py-6">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"></div>
      <p class="text-sm text-gray-500 mt-2">Loading health report...</p>
    </div>

    <!-- Table -->
    <div id="reportTableContainer" class="hidden overflow-x-auto">
      <table class="min-w-full text-left border text-sm">
        <thead class="bg-gray-200">
          <tr>
            <th class="px-3 py-2">User ID</th>
            <th class="px-3 py-2">Name</th>
            <th class="px-3 py-2">Age</th>
            <th class="px-3 py-2">Height</th>
            <th class="px-3 py-2">Weight</th>
            <th class="px-3 py-2">Gender</th>
            <th class="px-3 py-2">Steps</th>
            <th class="px-3 py-2">Water</th>
            <th class="px-3 py-2">Calories</th>
            <th class="px-3 py-2">Disease</th>
            <th class="px-3 py-2">Genetic</th>
            <th class="px-3 py-2">Allergies</th>
          </tr>
        </thead>

        <tbody id="reportTableBody"></tbody>
      </table>

      <p id="noRows" class="text-center text-gray-500 mt-4 hidden">
        No health records found.
      </p>
    </div>

  </div>
</div>
